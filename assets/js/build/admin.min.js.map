{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/src/admin/index.js","webpack:///./assets/js/src/admin/modules/book-layout.js","webpack:///./assets/js/src/admin/modules/taxonomies.js","webpack:///./assets/js/src/utils/api-request.js","webpack:///./assets/js/src/utils/index.js","webpack:///./assets/js/src/utils/loaders.js","webpack:///external \"jQuery\""],"names":["$","BDB_Book_Layout","init","BDB_Book_Taxonomies","jQuery","on","toggleBookTextarea","changeCoverAlignment","sort","e","next","slideToggle","parentDiv","removeClass","index","css","match","join","addClass","val","sortable","cancel","connectWith","placeholder","update","event","ui","parentID","item","parent","attr","disabledIndicator","find","hasClass","tableBody","rowTemplate","wp","template","rowEmptyTemplate","errorWrap","generateSlug","addTaxonomy","document","updateTaxonomy","deleteTaxonomy","getTaxonomies","apiRequest","then","response","empty","length","append","remove","each","key","taxonomy","catch","error","show","name","slug","toLowerCase","replace","preventDefault","button","spinButton","hide","args","format","checkRequiredFields","requirementsResponse","apiResponse","unspinButton","errorMessage","wrap","closest","data","confirm","bdbVars","confirm_delete_taxonomy","Promise","resolve","reject","hasOwnProperty","error_required_fields","endpoint","method","options","url","api_base","beforeSend","xhr","setRequestHeader","api_nonce","xhrFields","withCredentials","console","log","ajax","success","qpXHR","textStatus","errorThrown","generic_erroc","responseJSON","message","newText","is_admin","please_wait","prop","text","html"],"mappings":"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","file":"assets/js/build/admin.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./assets/js/src/admin/index.js\");\n","/**\r\n * Admin Scripts\r\n *\r\n * @package book-database\r\n * @copyright Copyright (c) 2019, Ashley Gibson\r\n * @license GPL2+\r\n */\r\n\r\nimport { BDB_Book_Layout } from './modules/book-layout.js';\r\nimport { BDB_Book_Taxonomies } from './modules/taxonomies.js';\r\n\r\n( function ( $ ) {\r\n\r\n\tBDB_Book_Layout.init();\r\n\tBDB_Book_Taxonomies.init();\r\n\r\n} )( jQuery );","/* global $ */\r\n\r\n/**\r\n * Book Layout\r\n */\r\nvar BDB_Book_Layout = {\r\n\r\n\t/**\r\n\t * Initialize\r\n\t */\r\n\tinit: function() {\r\n\t\t$( '.bdb-book-option-toggle' ).on( 'click', this.toggleBookTextarea );\r\n\t\t$( '#bdb-book-layout-cover-changer' ).on( 'change', this.changeCoverAlignment );\r\n\r\n\t\tthis.sort();\r\n\t},\r\n\r\n\t/**\r\n\t * Toggle the book textarea\r\n\t *\r\n\t * @param e\r\n\t */\r\n\ttoggleBookTextarea: function( e ) {\r\n\t\t$( this ).next().slideToggle();\r\n\t},\r\n\r\n\t/**\r\n\t * Change the real-time alignment of the book coversss123\r\n\t *\r\n\t * @param e\r\n\t */\r\n\tchangeCoverAlignment: function ( e ) {\r\n\t\tlet parentDiv = $( '#bdb-book-option-cover' );\r\n\r\n\t\tparentDiv.removeClass( function ( index, css ) {\r\n\t\t\treturn ( css.match(/(^|\\s)bdb-book-cover-align-\\S+/g) || [] ).join(' ');\r\n\t\t} ).addClass( 'bdb-book-cover-align-' + $( this ).val() );\r\n\t},\r\n\r\n\tsort: function() {\r\n\t\t$( '.bdb-sortable' ).sortable( {\r\n\t\t\tcancel: '.bdb-no-sort, textarea, input, select',\r\n\t\t\tconnectWith: '.bdb-sortable',\r\n\t\t\tplaceholder: 'bdb-sortable-placeholder',\r\n\t\t\tupdate: function ( event, ui ) {\r\n\t\t\t\tlet parentID = ui.item.parent().attr( 'id' );\r\n\t\t\t\tlet disabledIndicator = ui.item.find( '.bdb-book-option-disabled' );\r\n\t\t\t\tif ( $( '#' + parentID ).hasClass( 'bdb-sorter-enabled-column' ) ) {\r\n\t\t\t\t\tdisabledIndicator.val( 'false' );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdisabledIndicator.val( 'true' );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} )\r\n\t}\r\n\r\n};\r\n\r\nexport { BDB_Book_Layout };","/* global $, bdbVars, wp */\r\n\r\nimport { apiRequest, spinButton, unspinButton } from 'utils';\r\n\r\n/**\r\n * Book Taxonomies\r\n */\r\nvar BDB_Book_Taxonomies = {\r\n\r\n\ttableBody: false,\r\n\r\n\trowTemplate: wp.template( 'bdb-book-taxonomies-table-row' ),\r\n\r\n\trowEmptyTemplate: wp.template( 'bdb-book-taxonomies-table-row-empty' ),\r\n\r\n\terrorWrap: '',\r\n\r\n\t/**\r\n\t * Initialize\r\n\t */\r\n\tinit: function() {\r\n\r\n\t\tthis.tableBody = $( '#bdb-book-taxonomies tbody' );\r\n\t\tthis.errorWrap = $( '#bdb-book-taxonomies-errors' );\r\n\r\n\t\t$( '#bdb-new-book-taxonomy-name' ).on( 'keyup', this.generateSlug );\r\n\t\t$( '#bdb-new-book-taxonomy-fields' ).on( 'click', 'button', this.addTaxonomy );\r\n\t\t$( document ).on( 'click', '.bdb-update-book-taxonomy', this.updateTaxonomy );\r\n\t\t$( document ).on( 'click', '.bdb-remove-book-taxonomy', this.deleteTaxonomy );\r\n\r\n\t\tthis.getTaxonomies();\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Get the list of taxonomies\r\n\t */\r\n\tgetTaxonomies: function() {\r\n\r\n\t\tapiRequest( 'v1/taxonomy', {}, 'GET' ).then( function( response ) {\r\n\r\n\t\t\tBDB_Book_Taxonomies.tableBody.empty();\r\n\r\n\t\t\tif ( 0 === response.length || 'undefined' === typeof response.length ) {\r\n\t\t\t\tBDB_Book_Taxonomies.tableBody.append( BDB_Book_Taxonomies.rowEmptyTemplate );\r\n\t\t\t} else {\r\n\t\t\t\t$( '#bdb-book-taxonomies-empty' ).remove();\r\n\t\t\t\t$.each( response, function( key, taxonomy ) {\r\n\t\t\t\t\tBDB_Book_Taxonomies.tableBody.append( BDB_Book_Taxonomies.rowTemplate( taxonomy ) );\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t} ).catch( function( error ) {\r\n\t\t\tBDB_Book_Taxonomies.errorWrap.empty().append( error ).show();\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Automatically generate a slug from the name\r\n\t *\r\n\t * @param e\r\n\t */\r\n\tgenerateSlug: function ( e ) {\r\n\r\n\t\tlet name = $( '#bdb-new-book-taxonomy-name' ).val();\r\n\t\tlet slug = name.toLowerCase().replace( /[^a-z0-9_\\-]/g, '' );\r\n\r\n\t\t$( '#bdb-new-book-taxonomy-slug' ).val( slug );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Add a new taxonomy\r\n\t *\r\n\t * @param e\r\n\t */\r\n\taddTaxonomy: function ( e ) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tlet button = $( this );\r\n\r\n\t\tspinButton( button );\r\n\t\tBDB_Book_Taxonomies.errorWrap.empty().hide();\r\n\r\n\t\tlet args = {\r\n\t\t\tname: $( '#bdb-new-book-taxonomy-name' ).val(),\r\n\t\t\tslug: $( '#bdb-new-book-taxonomy-slug' ).val(),\r\n\t\t\tformat: $( '#bdb-new-book-taxonomy-format' ).val()\r\n\t\t};\r\n\r\n\t\tBDB_Book_Taxonomies.checkRequiredFields( args ).then( function( requirementsResponse ) {\r\n\t\t\treturn apiRequest( 'v1/taxonomy/add', args, 'POST' );\r\n\t\t} ).then( function( apiResponse ) {\r\n\t\t\tBDB_Book_Taxonomies.tableBody.append( BDB_Book_Taxonomies.rowTemplate( apiResponse ) );\r\n\r\n\t\t\t// Wipe field values.\r\n\t\t\t$( '#bdb-new-book-taxonomy-fields' ).find( 'input' ).val( '' );\r\n\r\n\t\t\tunspinButton( button );\r\n\t\t} ).catch( function( errorMessage ) {\r\n\t\t\tBDB_Book_Taxonomies.errorWrap.append( errorMessage ).show();\r\n\t\t\tunspinButton( button );\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Update a taxonomy\r\n\t *\r\n\t * @param e\r\n\t */\r\n\tupdateTaxonomy: function ( e ) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tlet button = $( this );\r\n\r\n\t\tspinButton( button );\r\n\t\tBDB_Book_Taxonomies.errorWrap.empty().hide();\r\n\r\n\t\tlet wrap = button.closest( 'tr' );\r\n\r\n\t\tlet args = {\r\n\t\t\tname: wrap.find( '.bdb-book-taxonomy-name input' ).val(),\r\n\t\t\tslug: wrap.find( '.bdb-book-taxonomy-slug input' ).val(),\r\n\t\t\tformat: wrap.find( '.bdb-book-taxonomy-format select' ).val()\r\n\t\t};\r\n\r\n\t\tBDB_Book_Taxonomies.checkRequiredFields( args ).then( function( requirementsResponse ) {\r\n\t\t\treturn apiRequest( 'v1/taxonomy/update/' + wrap.data( 'id' ), args, 'POST' )\r\n\t\t} ).then( function( apiResponse ) {\r\n\t\t\tunspinButton( button );\r\n\t\t} ).catch( function( errorMessage ) {\r\n\t\t\tBDB_Book_Taxonomies.errorWrap.append( errorMessage ).show();\r\n\t\t\tunspinButton( button );\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tdeleteTaxonomy: function ( e ) {\r\n\r\n\t\te.preventDefault();\r\n\r\n\t\tif ( ! confirm( bdbVars.confirm_delete_taxonomy ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet button = $( this );\r\n\r\n\t\tspinButton( button );\r\n\t\tBDB_Book_Taxonomies.errorWrap.empty().hide();\r\n\r\n\t\tlet wrap = button.closest( 'tr' );\r\n\r\n\t\tapiRequest( 'v1/taxonomy/delete/' + wrap.data( 'id' ), {}, 'DELETE' ).then( function( apiResponse ) {\r\n\t\t\twrap.remove();\r\n\t\t} ).catch( function( errorMessage ) {\r\n\t\t\tBDB_Book_Taxonomies.errorWrap.append( errorMessage ).show();\r\n\t\t\tunspinButton( button );\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Check required fields are filled out\r\n\t *\r\n\t * @param {object} args\r\n\t * @returns {Promise}\r\n\t */\r\n\tcheckRequiredFields: function( args ) {\r\n\r\n\t\treturn new Promise( function( resolve, reject ) {\r\n\r\n\t\t\tif ( ! args.hasOwnProperty( 'name' ) || '' === args.name ) {\r\n\t\t\t\treject( bdbVars.error_required_fields );\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! args.hasOwnProperty( 'slug' ) || '' === args.slug ) {\r\n\t\t\t\treject( bdbVars.error_required_fields );\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! args.hasOwnProperty( 'format' ) || '' === args.format ) {\r\n\t\t\t\treject( bdbVars.error_required_fields );\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tresolve();\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { BDB_Book_Taxonomies };","/* global $, bdbVars */\r\n\r\n/**\r\n * Make a request to the REST API\r\n *\r\n * @param {string} endpoint\r\n * @param {object} data\r\n * @param {string} method\r\n * @returns {Promise}\r\n */\r\nexport function apiRequest( endpoint, data = {}, method = 'POST' ) {\r\n\tconst options = {\r\n\t\tmethod: method,\r\n\t\turl: bdbVars.api_base + 'book-database/' + endpoint,\r\n\t\tbeforeSend: function ( xhr ) {\r\n\t\t\txhr.setRequestHeader( 'X-WP-Nonce', bdbVars.api_nonce );\r\n\t\t},\r\n\t\txhrFields: {\r\n\t\t\twithCredentials: true,\r\n\t\t},\r\n\t\tdata: data\r\n\t};\r\n\r\n\tconsole.log( 'API endpoint', endpoint );\r\n\r\n\treturn new Promise( function ( resolve, reject ) {\r\n\t\t$.ajax( options ).success( function ( response ) {\r\n\t\t\tconsole.log( 'Success response', response );\r\n\t\t\tresolve( response );\r\n\t\t} ).error( function ( qpXHR, textStatus, errorThrown ) {\r\n\t\t\tlet error = bdbVars.generic_erroc;\r\n\r\n\t\t\tif ( 'undefined' !== typeof qpXHR.responseJSON ) {\r\n\t\t\t\terror = qpXHR.responseJSON;\r\n\r\n\t\t\t\tif ( 'undefined' !== typeof error.message ) {\r\n\t\t\t\t\terror = error.message;\r\n\t\t\t\t}\r\n\t\t\t} else if ( 'undefined' !== typeof qpXHR.message ) {\r\n\t\t\t\terror = qpXHR.message;\r\n\t\t\t}\r\n\r\n\t\t\treject( error );\r\n\t\t} );\r\n\t} )\r\n}","export * from './api-request.js';\r\nexport * from './loaders.js';","/* global $, bdbVars */\r\n\r\n/**\r\n * Spin a button\r\n *\r\n *      - Disables the button\r\n *      - Saves the current button text to `data-text`\r\n *      - Changes the text to either a WP-Admin spinner or \"Please Wait...\"\r\n *\r\n * @param button\r\n */\r\nexport function spinButton( button ) {\r\n\r\n\tlet newText = bdbVars.is_admin ? '<span class=\"spinner is-active\"></span>' : bdbVars.please_wait;\r\n\r\n\tbutton.prop( 'disabled', true ).data( 'text', button.text() ).html( newText );\r\n\r\n}\r\n\r\n/**\r\n * Unspin a button\r\n *\r\n *      - Enables teh button\r\n *      - Sets the text to the `data-text` attribute value\r\n *\r\n * @param button\r\n */\r\nexport function unspinButton( button ) {\r\n\tbutton.prop( 'disabled', false ).text( button.data( 'text' ) );\r\n}","module.exports = jQuery;"],"sourceRoot":""}