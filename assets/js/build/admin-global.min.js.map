{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/js/src/admin/modules/dashboard-widgets.js","webpack:///./assets/js/src/admin/modules/post-metabox.js","webpack:///./assets/js/src/admin/global.js","webpack:///./assets/js/src/utils/loaders.js","webpack:///./assets/js/src/utils/ratings.js","webpack:///external \"jQuery\"","webpack:///./assets/js/src/admin/modules/dates.js","webpack:///./assets/js/src/utils/api-request.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","BDB_Dashboard_Widgets","init","$","on","this","updatePercentage","setUnit","saveProgress","saveProgressOnEnter","finishBook","dnfBook","setRating","e","preventDefault","closest","find","slideToggle","wrap","unit","data","removeClass","addClass","hide","show","readablePercentage","button","logID","percentage","progressWrap","progressNumber","spinButton","pageField","maxPages","parseInt","currentPage","val","Math","round","percentageField","parseFloat","args","percentage_complete","apiRequest","then","apiResponse","css","text","catch","errorMessage","console","log","finally","unspinButton","slideUp","keyCode","trigger","confirm","bdbVars","confirm_finish_book","date_finished","remove","confirm_dnf_book","rating","empty","append","getStars","BDB_Post_Metabox","postID","userID","bookID","table","tableBody","errorWrap","searchResultsWrap","document","getElementById","getReviews","toggleSearch","searchBooks","selectBook","addReview","disassociateReview","deleteReview","rating_format","review_query","field","response","length","wp","template","each","review","error","type","which","search","searchType","author_query","operator","book_query","no_books","booksHTML","book","id","title","by","author_name","please_wait","book_id","logOptions","shapeLog","readingLog","date_started_formatted","dateUTCtoLocal","date_started","date_finished_formatted","stars","unknown","reading_log_id","user_id","post_id","confirm_remove_review_association","confirm_delete_review","jQuery","newText","is_admin","prop","html","fullStars","floor","halfStars","ceil","repeat","utcDate","format","localDate","moment","utc","local","dateLocalToUTC","endpoint","method","options","url","api_base","beforeSend","xhr","setRequestHeader","api_nonce","xhrFields","withCredentials","Promise","resolve","reject","ajax","success","qpXHR","textStatus","errorThrown","generic_erroc","responseJSON","message","ajaxRequest","dataType","ajaxurl"],"mappings":"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","file":"assets/js/build/admin-global.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 139);\n","/* global $, bdbVars, wp */\n\nimport { apiRequest, spinButton, unspinButton, getStars } from 'utils';\n\n/**\n * Admin Dashboard Widgets\n */\nvar BDB_Dashboard_Widgets = {\n\n\t/**\n\t * Initialize\n\t */\n\tinit: function() {\n\n\t\t$( '.bdb-currently-reading-widget-update-progress' ).on( 'click', this.updatePercentage );\n\t\t$( '.bdb-currently-reading-progress-unit-choices' ).on( 'click', 'a', this.setUnit );\n\t\t$( '.bdb-currently-reading-widget-save-progress' ).on( 'click', this.saveProgress );\n\t\t$( '.bdb-currently-reading-set-progress-wrap' ).on( 'keydown', 'input', this.saveProgressOnEnter );\n\t\t$( '.bdb-currently-reading-widget-finish-book' ).on( 'click', this.finishBook );\n\t\t$( '.bdb-currently-reading-widget-dnf-book' ).on( 'click', this.dnfBook );\n\t\t$( '.bdb-currently-reading-widget-set-rating' ).on( 'click', this.setRating );\n\n\t},\n\n\t/**\n\t * Update the percentage\n\t *\n\t * @param e\n\t */\n\tupdatePercentage: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\tlet wrap = $( this ).closest( 'li' );\n\n\t\twrap.find( '.bdb-currently-reading-set-progress-wrap' ).slideToggle();\n\n\t},\n\n\t/**\n\t * Set the unit to use for updating progress\n\t *\n\t * @param e\n\t */\n\tsetUnit: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\tlet wrap = $( this ).closest( '.bdb-currently-reading-set-progress-wrap' ),\n\t\t\tunit = $( this ).data( 'unit' );\n\n\t\twrap.find( '.bdb-currently-reading-progress-unit-choices a' ).removeClass( 'bdb-currently-reading-progress-unit-selected' );\n\t\t$( this ).addClass( 'bdb-currently-reading-progress-unit-selected' );\n\n\t\tif ( 'page' === unit ) {\n\t\t\twrap.find( '.bdb-currently-reading-unit-percentage-wrap' ).hide();\n\t\t\twrap.find( '.bdb-currently-reading-unit-pages-wrap' ).show();\n\t\t} else {\n\t\t\twrap.find( '.bdb-currently-reading-unit-percentage-wrap' ).show();\n\t\t\twrap.find( '.bdb-currently-reading-unit-pages-wrap' ).hide();\n\t\t}\n\n\t},\n\n\t/**\n\t * Save the new progress\n\t *\n\t * @param e\n\t */\n\tsaveProgress: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\tlet button = $( this ),\n\t\t\twrap = button.closest( 'li' ),\n\t\t\tlogID = wrap.data( 'log-id' ),\n\t\t\tunit = wrap.find( '.bdb-currently-reading-progress-unit-selected' ).data( 'unit' ),\n\t\t\tpercentage = 0,\n\t\t\treadablePercentage,\n\t\t\tprogressWrap = wrap.find( '.bdb-currently-reading-progress-bar' ),\n\t\t\tprogressNumber = wrap.find( '.bdb-currently-reading-progress-number' );\n\n\t\tspinButton( button );\n\n\t\t// Figure out the percentage.\n\t\tif ( 'page' === unit ) {\n\t\t\tlet pageField = wrap.find( '.bdb-currently-reading-unit-page' ),\n\t\t\t\tmaxPages = parseInt( pageField.data( 'max' ) ),\n\t\t\t\tcurrentPage = parseInt( pageField.val() );\n\n\t\t\tif ( maxPages > 0 ) {\n\t\t\t\tpercentage = currentPage / maxPages;\n\t\t\t\treadablePercentage = Math.round( percentage * 100 );\n\t\t\t}\n\t\t} else {\n\t\t\tlet percentageField = wrap.find( '.bdb-currently-reading-unit-percentage' );\n\n\t\t\treadablePercentage = parseFloat( percentageField.val() );\n\n\t\t\tif ( readablePercentage > 0 ) {\n\t\t\t\tpercentage = readablePercentage / 100;\n\t\t\t}\n\t\t}\n\n\t\tlet args = {\n\t\t\tpercentage_complete: percentage\n\t\t};\n\n\t\tapiRequest( 'v1/reading-log/update/' + logID, args, 'POST' ).then( function( apiResponse ) {\n\t\t\tprogressWrap.css( 'width', readablePercentage + '%' );\n\t\t\tprogressNumber.text( readablePercentage + '%' );\n\t\t} ).catch( function( errorMessage ) {\n\t\t\tconsole.log( errorMessage );\n\t\t} ).finally( function() {\n\t\t\tunspinButton( button );\n\t\t\twrap.find( '.bdb-currently-reading-set-progress-wrap' ).slideUp();\n\t\t} );\n\n\t},\n\n\t/**\n\t * Trigger progress saving when clicking \"enter\"\n\t *\n\t * @param e\n\t */\n\tsaveProgressOnEnter: function ( e ) {\n\n\t\tif ( 13 === e.keyCode ) {\n\t\t\te.preventDefault();\n\n\t\t\t$( this ).closest( 'li' ).find( '.bdb-currently-reading-widget-save-progress' ).trigger( 'click' );\n\t\t}\n\n\t},\n\n\t/**\n\t * Finish a book\n\t *\n\t * This sets the percentage to 100% and the finished date to today.\n\t *\n\t * @param e\n\t */\n\tfinishBook: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\tif ( ! confirm( bdbVars.confirm_finish_book ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet button = $( this );\n\n\t\tspinButton( button );\n\n\t\tlet wrap = button.closest( 'li' );\n\n\t\tlet args = {\n\t\t\tpercentage_complete: 1,\n\t\t\tdate_finished: wrap.data( 'now' )\n\t\t};\n\n\t\tapiRequest( 'v1/reading-log/update/' + wrap.data( 'log-id' ), args, 'POST' ).then( function( apiResponse ) {\n\t\t\twrap.find( '.bdb-currently-reading-data' ).remove();\n\t\t\twrap.find( '.bdb-currently-reading-rate-book' ).show();\n\t\t} ).catch( function( errorMessage ) {\n\t\t\tconsole.log( errorMessage );\n\t\t} ).finally( function() {\n\t\t\tunspinButton( button );\n\t\t} );\n\n\t},\n\n\t/**\n\t * DNF book\n\t *\n\t * @param e\n\t * @returns {boolean}\n\t */\n\tdnfBook: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\tif ( ! confirm( bdbVars.confirm_dnf_book ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet button = $( this );\n\n\t\tspinButton( button );\n\n\t\tlet wrap = button.closest( 'li' );\n\n\t\tlet args = {\n\t\t\tdate_finished: wrap.data( 'now' )\n\t\t};\n\n\t\tapiRequest( 'v1/reading-log/update/' + wrap.data( 'log-id' ), args, 'POST' ).then( function( apiResponse ) {\n\t\t\twrap.find( '.bdb-currently-reading-data' ).remove();\n\t\t\twrap.find( '.bdb-currently-reading-rate-book' ).show();\n\t\t} ).catch( function( errorMessage ) {\n\t\t\tconsole.log( errorMessage );\n\t\t} ).finally( function() {\n\t\t\tunspinButton( button );\n\t\t} );\n\n\t},\n\n\t/**\n\t * Set the rating\n\t *\n\t * @param e\n\t */\n\tsetRating: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\tlet button = $( this );\n\n\t\tspinButton( button );\n\n\t\tlet wrap = button.closest( 'li' );\n\n\t\tlet args = {\n\t\t\trating: wrap.find( '.bdb-currently-reading-rating' ).val()\n\t\t};\n\n\t\tapiRequest( 'v1/reading-log/update/' + wrap.data( 'log-id' ), args, 'POST' ).then( function( apiResponse ) {\n\t\t\twrap.find( '.bdb-currently-reading-rate-book' ).empty().append( '<p>' + getStars( args.rating ) + '</p>' )\n\t\t} ).catch( function( errorMessage ) {\n\t\t\tconsole.log( errorMessage );\n\t\t} ).finally( function() {\n\t\t\tunspinButton( button );\n\t\t} );\n\n\t}\n\n};\n\nexport { BDB_Dashboard_Widgets }","/* global $, bdbVars, wp */\n\nimport { apiRequest, spinButton, unspinButton } from 'utils';\nimport { dateLocalToUTC, dateUTCtoLocal } from \"./dates\";\n\n/**\n * Post Metabox\n */\nvar BDB_Post_Metabox = {\n\n\tpostID: 0,\n\n\tuserID: 0,\n\n\tbookID: 0,\n\n\ttable: false,\n\n\ttableBody: false,\n\n\terrorWrap: false,\n\n\tsearchResultsWrap: false,\n\n\t/**\n\t * Initialize\n\t */\n\tinit: function() {\n\n\t\tif ( ! document.getElementById('bdb-post-reviews-table') ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.table = $( '#bdb-post-reviews-table' );\n\t\tthis.postID = this.table.data( 'post-id' );\n\t\tthis.userID = this.table.data( 'user-id' );\n\t\tthis.tableBody = this.table.find( 'tbody' );\n\t\tthis.errorWrap = $( '#bdb-post-reviews-errors' );\n\t\tthis.searchResultsWrap = $( '#bdb-book-search-results' );\n\n\t\tthis.getReviews();\n\n\t\t$( '#bdb-associated-review-post' ).on( 'click', this.toggleSearch );\n\t\t$( '#bdb-search-book-title-author' ).on( 'keypress', this.searchBooks );\n\t\t$( '#bdb-search-book-fields' ).on( 'click', 'button', this.searchBooks );\n\t\tthis.searchResultsWrap.on( 'click', 'a', this.selectBook );\n\t\t$( '#bdb-add-review' ).on( 'click', this.addReview );\n\t\t$( document ).on( 'click', '.bdb-disassociate-review-from-post', this.disassociateReview );\n\t\t$( document ).on( 'click', '.bdb-delete-review', this.deleteReview );\n\n\t},\n\n\t/**\n\t * Get the reviews associated with this post\n\t */\n\tgetReviews: function() {\n\n\t\tlet args = {\n\t\t\trating_format: 'text',\n\t\t\treview_query: [ {\n\t\t\t\tfield: 'post_id',\n\t\t\t\tvalue: BDB_Post_Metabox.postID\n\t\t\t} ]\n\t\t};\n\n\t\tapiRequest( 'v1/reviews', args, 'GET' ).then( function( response ) {\n\n\t\t\tBDB_Post_Metabox.tableBody.empty();\n\n\t\t\tif ( 0 === response.length || 'undefined' === typeof response.length ) {\n\t\t\t\tBDB_Post_Metabox.tableBody.append( wp.template( 'bdb-table-post-reviews-row-empty' ) );\n\t\t\t} else {\n\t\t\t\t$.each( response, function( key, review ) {\n\t\t\t\t\tBDB_Post_Metabox.tableBody.append( wp.template( 'bdb-table-post-reviews-row' )( review ) );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} ).catch( function( error ) {\n\t\t\tBDB_Post_Metabox.errorWrap.empty().append( error ).show();\n\t\t} );\n\n\t},\n\n\t/**\n\t * Toggle the search fields\n\t *\n\t * @param e\n\t */\n\ttoggleSearch: function ( e ) {\n\t\te.preventDefault();\n\t\t$( '#bdb-search-book-fields' ).slideToggle();\n\t},\n\n\t/**\n\t * Search for books\n\t *\n\t * @param e\n\t */\n\tsearchBooks: function ( e ) {\n\n\t\tif ( 'click' === e.type ) {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tif ( 'keypress' === e.type && 13 !== e.which ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\te.preventDefault();\n\t\t}\n\n\t\tlet button = $( '#bdb-search-book-fields' ).find( 'button' ),\n\t\t\tsearch = $( '#bdb-search-book-title-author' ).val(),\n\t\t\tsearchType = $( '#bdb-search-book-type' ).val(),\n\t\t\targs = {};\n\n\t\tspinButton( button );\n\n\t\tBDB_Post_Metabox.errorWrap.empty().hide();\n\t\tBDB_Post_Metabox.searchResultsWrap.empty();\n\n\t\tif ( 'author' === searchType ) {\n\t\t\targs.author_query = [ {\n\t\t\t\tfield: 'name',\n\t\t\t\tvalue: search,\n\t\t\t\toperator: 'LIKE'\n\t\t\t} ];\n\t\t} else {\n\t\t\targs.book_query = [ {\n\t\t\t\tfield: 'title',\n\t\t\t\tvalue: search,\n\t\t\t\toperator: 'LIKE'\n\t\t\t} ];\n\t\t}\n\n\t\tapiRequest( 'v1/books', args, 'GET' ).then( function( apiResponse ) {\n\n\t\t\tif ( 0 === apiResponse.length || 'undefined' === typeof apiResponse.length ) {\n\t\t\t\tBDB_Post_Metabox.searchResultsWrap.append( '<p>' + bdbVars.no_books + '</p>' );\n\t\t\t} else {\n\t\t\t\tlet booksHTML = '';\n\t\t\t\t$.each( apiResponse, function( key, book ) {\n\t\t\t\t\tbooksHTML = booksHTML + '<li><a href=\"#\" data-id=\"' + book.id + '\">' + book.title + ' ' + bdbVars.by + ' ' + book.author_name + '</a></li>';\n\t\t\t\t} );\n\t\t\t\tBDB_Post_Metabox.searchResultsWrap.append( '<ul>' + booksHTML + '</ul>' );\n\t\t\t}\n\n\t\t} ).catch( function( errorMessage ) {\n\t\t\tBDB_Post_Metabox.errorWrap.append( errorMessage ).show();\n\t\t} ).finally( function() {\n\t\t\tunspinButton( button );\n\t\t} );\n\n\t},\n\n\t/**\n\t * Select a book to review\n\t *\n\t * @param e\n\t */\n\tselectBook: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\t// Set the book ID.\n\t\tBDB_Post_Metabox.bookID = $( this ).data( 'id' );\n\n\t\t// Wipe the search results.\n\t\tBDB_Post_Metabox.searchResultsWrap.empty().append( '<p>' + bdbVars.please_wait + '</p>' );\n\n\t\tlet args = {\n\t\t\tbook_id: $( this ).data( 'id' )\n\t\t};\n\n\t\t// Get reading logs.\n\t\tapiRequest( 'v1/reading-log', args, 'GET' ).then( function( apiResponse ) {\n\n\t\t\tlet logOptions = $( '#bdb-review-reading-log' );\n\n\t\t\tif ( apiResponse.length > 0 ) {\n\t\t\t\t$.each( apiResponse, function( key, log ) {\n\t\t\t\t\tlogOptions.append( '<option value=\"' + log.id + '\">' + BDB_Post_Metabox.shapeLog( log ) + '</option>' );\n\t\t\t\t} )\n\t\t\t}\n\n\t\t\t// Wipe the search results again.\n\t\t\tBDB_Post_Metabox.searchResultsWrap.empty();\n\n\t\t\t// Show the log selection.\n\t\t\t$( '#bdb-add-review-fields' ).show();\n\n\t\t} ).catch( function( errorMessage ) {\n\t\t\tBDB_Post_Metabox.errorWrap.append( errorMessage ).show();\n\t\t} );\n\n\t},\n\n\t/**\n\t * Shape the reading log entry for display in an `<option>`\n\t *\n\t * @param {object} readingLog\n\t * @returns {string}\n\t */\n\tshapeLog: function ( readingLog ) {\n\n\t\treadingLog.date_started_formatted  = dateUTCtoLocal( readingLog.date_started, 'display' );\n\t\treadingLog.date_finished_formatted = dateUTCtoLocal( readingLog.date_finished, 'display' );\n\t\treadingLog.rating                  = null === readingLog.rating ? null : parseFloat( readingLog.rating ) + ' ' + bdbVars.stars;\n\n\t\tif ( ! readingLog.date_started_formatted ) {\n\t\t\treadingLog.date_started_formatted = '(' + bdbVars.unknown + ')';\n\t\t}\n\t\tif ( ! readingLog.date_finished_formatted ) {\n\t\t\treadingLog.date_finished_formatted = '(' + bdbVars.unknown + ')';\n\t\t}\n\n\t\treturn readingLog.date_started_formatted + ' - ' + readingLog.date_finished_formatted + ' (' + readingLog.rating + ')';\n\n\t},\n\n\t/**\n\t * Add a new review\n\t *\n\t * @param e\n\t */\n\taddReview: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\tlet button = $( this );\n\n\t\tspinButton( button );\n\n\t\tlet args = {\n\t\t\tbook_id: BDB_Post_Metabox.bookID,\n\t\t\treading_log_id: $( '#bdb-review-reading-log' ).val(),\n\t\t\tuser_id: BDB_Post_Metabox.userID,\n\t\t\tpost_id: BDB_Post_Metabox.postID\n\t\t};\n\n\t\tapiRequest( 'v1/review/add', args, 'POST' ).then( function( apiResponse ) {\n\n\t\t\tlet args = {\n\t\t\t\trating_format: 'text',\n\t\t\t\treview_query: [ {\n\t\t\t\t\tfield: 'id',\n\t\t\t\t\tvalue: apiResponse.id\n\t\t\t\t} ]\n\t\t\t};\n\n\t\t\treturn apiRequest( 'v1/reviews', args, 'GET' );\n\n\t\t} ).then( function( apiResponse ) {\n\n\t\t\t// Add the review(s) to the table.\n\t\t\t$.each( apiResponse, function( key, review ) {\n\t\t\t\t$( '#bdb-no-post-reviews' ).remove();\n\t\t\t\tBDB_Post_Metabox.tableBody.append( wp.template( 'bdb-table-post-reviews-row' )( review ) );\n\t\t\t} );\n\n\t\t\t// Hide the log selection.\n\t\t\t$( '#bdb-add-review-fields' ).hide();\n\n\t\t} ).catch( function( errorMessage ) {\n\t\t\tBDB_Post_Metabox.errorWrap.append( errorMessage ).show();\n\t\t} ).finally( function() {\n\t\t\tunspinButton( button );\n\t\t} );\n\n\t},\n\n\t/**\n\t * Disassociate a review from this post\n\t *\n\t * @param e\n\t * @returns {boolean}\n\t */\n\tdisassociateReview: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\tif ( ! confirm( bdbVars.confirm_remove_review_association ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet button = $( this );\n\n\t\tspinButton( button );\n\n\t\tBDB_Post_Metabox.errorWrap.empty().hide();\n\n\t\tlet wrap = button.closest( 'tr' );\n\n\t\tlet args = {\n\t\t\tpost_id: null\n\t\t};\n\n\t\tapiRequest( 'v1/review/update/' + wrap.data( 'id' ), args, 'POST' ).then( function( apiResponse ) {\n\t\t\twrap.remove();\n\t\t} ).catch( function( errorMessage ) {\n\t\t\tBDB_Post_Metabox.errorWrap.append( errorMessage ).show();\n\t\t} ).finally( function() {\n\t\t\tunspinButton( button );\n\t\t} );\n\n\t},\n\n\t/**\n\t * Delete a review\n\t *\n\t * @param e\n\t * @returns {boolean}\n\t */\n\tdeleteReview: function ( e ) {\n\n\t\te.preventDefault();\n\n\t\tif ( ! confirm( bdbVars.confirm_delete_review ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet button = $( this );\n\n\t\tspinButton( button );\n\n\t\tBDB_Post_Metabox.errorWrap.empty().hide();\n\n\t\tlet wrap = button.closest( 'tr' );\n\n\t\tlet args = {\n\t\t\tpost_id: null\n\t\t};\n\n\t\tapiRequest( 'v1/review/delete/' + wrap.data( 'id' ), args, 'DELETE' ).then( function( apiResponse ) {\n\t\t\twrap.remove();\n\t\t} ).catch( function( errorMessage ) {\n\t\t\tBDB_Post_Metabox.errorWrap.append( errorMessage ).show();\n\t\t} ).finally( function() {\n\t\t\tunspinButton( button );\n\t\t} );\n\n\t}\n\n};\n\nexport { BDB_Post_Metabox }","/**\n * Admin Global Scripts\n *\n * We have a separate file here because this one is loaded on non-BDB pages and we want\n * to avoid loading *all* our plugin JS on such \"public\" pages like that.\n *\n * @package book-database\n * @copyright Copyright (c) 2019, Ashley Gibson\n * @license GPL2+\n */\n\nimport { BDB_Dashboard_Widgets } from \"./modules/dashboard-widgets\";\nimport { BDB_Post_Metabox } from \"./modules/post-metabox\";\n\n( function ( $ ) {\n\n\tBDB_Dashboard_Widgets.init();\n\tBDB_Post_Metabox.init();\n\n} )( jQuery );","/* global $, bdbVars */\n\n/**\n * Spin a button\n *\n *      - Disables the button\n *      - Saves the current button text to `data-text`\n *      - Changes the text to either a WP-Admin spinner or \"Please Wait...\"\n *\n * @param button\n */\nexport function spinButton( button ) {\n\n\tlet newText = bdbVars.is_admin ? '<span class=\"spinner is-active\"></span>' : bdbVars.please_wait;\n\n\tbutton.prop( 'disabled', true ).data( 'text', button.text() ).html( newText );\n\n}\n\n/**\n * Unspin a button\n *\n *      - Enables teh button\n *      - Sets the text to the `data-text` attribute value\n *\n * @param button\n */\nexport function unspinButton( button ) {\n\tbutton.prop( 'disabled', false ).text( button.data( 'text' ) );\n}","/* global $, bdbVars */\n\n/**\n * Convert a numberical star rating into HTML stars\n *\n * @param rating\n * @returns {string}\n */\nexport function getStars( rating ) {\n\n\tlet html = '';\n\tlet fullStars = Math.floor( rating );\n\tlet halfStars = Math.ceil( rating - fullStars );\n\tlet fullStarString = '&starf;';\n\tlet halfStarString = '&half;';\n\n\thtml += fullStarString.repeat( fullStars );\n\thtml += halfStarString.repeat( halfStars );\n\n\treturn html;\n\n}","module.exports = jQuery;","/* global $, bdbVars, moment */\n\nconst formatMySQL = 'YYYY-MM-DD HH:mm:ss';\nconst formatDisplay = 'MMMM D, YYYY';\n\n/**\n * Converts a UTC date string to local time in YYYY-mm-dd format.\n *\n * @param {string} utcDate\n * @param {string} format\n * @returns {string}\n */\nexport function dateUTCtoLocal( utcDate, format = 'mysql' ) {\n\n\tif ( '' === utcDate || ! utcDate) {\n\t\treturn '';\n\t}\n\n\tif ( 'display' === format ) {\n\t\tformat = formatDisplay;\n\t} else {\n\t\tformat = formatMySQL;\n\t}\n\n\tutcDate = moment.utc( utcDate );\n\n\t//console.log( 'UTC Date', utcDate );\n\n\tlet localDate = utcDate.local().format( format );\n\n\t//console.log( 'Local Date', localDate );\n\n\treturn localDate;\n\n}\n\n/**\n * Converts a local date string to UTC in YYYY-mm-dd format.\n *\n * @param {string} localDate\n * @returns {string}\n */\nexport function dateLocalToUTC( localDate ) {\n\n\tif ( '' === localDate || ! localDate ) {\n\t\treturn '';\n\t}\n\n\tlocalDate = moment( localDate );\n\n\t//console.log( 'Local Date', localDate );\n\n\tlet utcDate = localDate.utc().format( formatMySQL );\n\n\t//console.log( 'UTC Date', utcDate );\n\n\treturn utcDate;\n\n}","/* global $, bdbVars, ajaxurl */\n\n/**\n * Make a request to the REST API\n *\n * @param {string} endpoint\n * @param {object} data\n * @param {string} method\n * @returns {Promise}\n */\nexport function apiRequest( endpoint, data = {}, method = 'POST' ) {\n\tconst options = {\n\t\tmethod: method,\n\t\turl: bdbVars.api_base + 'book-database/' + endpoint,\n\t\tbeforeSend: function ( xhr ) {\n\t\t\txhr.setRequestHeader( 'X-WP-Nonce', bdbVars.api_nonce );\n\t\t},\n\t\txhrFields: {\n\t\t\twithCredentials: true,\n\t\t},\n\t\tdata: data\n\t};\n\n\t//console.log( 'API endpoint', endpoint );\n\n\treturn new Promise( function ( resolve, reject ) {\n\t\t$.ajax( options ).success( function ( response ) {\n\t\t\t//console.log( 'Success response', response );\n\t\t\tresolve( response );\n\t\t} ).error( function ( qpXHR, textStatus, errorThrown ) {\n\t\t\tlet error = bdbVars.generic_erroc;\n\n\t\t\tif ( 'undefined' !== typeof qpXHR.responseJSON ) {\n\t\t\t\terror = qpXHR.responseJSON;\n\n\t\t\t\tif ( 'undefined' !== typeof error.message ) {\n\t\t\t\t\terror = error.message;\n\t\t\t\t}\n\t\t\t} else if ( 'undefined' !== typeof qpXHR.message ) {\n\t\t\t\terror = qpXHR.message;\n\t\t\t}\n\n\t\t\treject( error );\n\t\t} );\n\t} );\n}\n\n/**\n * Make an ajax request\n *\n * @param {object} args\n * @returns {Promise}\n */\nexport function ajaxRequest( args ) {\n\n\tconst options = {\n\t\tmethod: 'POST',\n\t\tdataType: 'JSON',\n\t\turl: ajaxurl,\n\t\tdata: args\n\t};\n\n\treturn new Promise( function ( resolve, reject ) {\n\t\t$.ajax( options ).success( function ( response ) {\n\t\t\tif ( ! response.success ) {\n\t\t\t\t//console.log( 'Error response', response );\n\t\t\t\treject( response.data );\n\t\t\t} else {\n\t\t\t\t//console.log( 'Success response', response );\n\t\t\t\tresolve( response.data );\n\t\t\t}\n\t\t} ).error( function ( qpXHR, textStatus, errorThrown ) {\n\t\t\tlet error = bdbVars.generic_erroc;\n\n\t\t\tif ( 'undefined' !== typeof qpXHR.responseJSON ) {\n\t\t\t\terror = qpXHR.responseJSON;\n\n\t\t\t\tif ( 'undefined' !== typeof error.message ) {\n\t\t\t\t\terror = error.message;\n\t\t\t\t}\n\t\t\t} else if ( 'undefined' !== typeof qpXHR.message ) {\n\t\t\t\terror = qpXHR.message;\n\t\t\t}\n\n\t\t\treject( error );\n\t\t} );\n\t} );\n\n}"],"sourceRoot":""}